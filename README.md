# HTMLtoPDF

**Convert HTML to PDF entirely in your browser. No servers. No uploads. Your data never leaves your device.**

Optimized for HTML infographics generated by **Google Gemini Canvas**.

---

## Why This Exists

Most HTML-to-PDF tools either upload your content to a server or require desktop software. HTMLtoPDF eliminates both. Open the app, paste your Gemini infographic HTML, get a PDF. Done.

Gemini Canvas generates rich, self-contained HTML infographics that use CDN-loaded Tailwind CSS, Google Fonts, Chart.js, inline SVGs, and CSS gradients. Standard client-side converters break on this because they inject HTML as static markup — scripts never execute, styles never apply, charts never render. HTMLtoPDF solves this with an iframe-based rendering pipeline that lets the browser's own engine do the heavy lifting.

## How It Works

```
Paste HTML / Drop .html file / Enter URL
              |
              v
     +-----------------+
     | Input Resolver   |  Detects input type: raw HTML, URL, or file
     +-----------------+
              |
              v
     +-----------------+
     | Iframe Renderer  |  Loads HTML into a sandboxed <iframe> via srcdoc
     |                  |  Browser executes ALL scripts (Tailwind CDN,
     |                  |  Chart.js), loads Google Fonts, processes CSS
     +-----------------+
              |
              v
     +-----------------+
     | Resource Waiter  |  Waits for document.fonts.ready, all <img> loads,
     |                  |  and a settling delay for async script rendering
     +-----------------+
              |
              v
     +-----------------+
     | html2canvas      |  Captures the fully-rendered iframe body
     |                  |  into an HTML5 Canvas
     +-----------------+
              |
              v
     +-----------------+
     | jsPDF Paginator  |  Slices the canvas into A4-sized pages,
     |                  |  generates a multi-page PDF document
     +-----------------+
              |
              v
     +-----------------+
     | Blob Download    |  PDF delivered via URL.createObjectURL()
     +-----------------+
```

Every step runs in the browser. No `fetch()` during conversion. No WebSocket. No telemetry. The only network requests are made by the HTML content itself (loading its own CDN scripts and fonts inside the iframe).

### Why an Iframe Instead of innerHTML

The critical difference. When you do `container.innerHTML = html`, the browser parses the markup but **never executes `<script>` tags**. Gemini infographic HTML depends on:

- **`<script src="https://cdn.tailwindcss.com">`** — without execution, every Tailwind utility class is ignored. The entire layout breaks.
- **`<script src="https://cdn.jsdelivr.net/npm/chart.js">`** + inline `<script>` initialization — without execution, `<canvas>` elements stay blank.
- **`<link>` tags for Google Fonts** — without a proper document context, fonts don't load and text renders in fallback fonts with wrong metrics.

An iframe with `srcdoc` creates a real browsing context. The browser treats it as a full page load — scripts execute, stylesheets apply, fonts download, CSS variables resolve. The result is pixel-accurate rendering of Gemini's output.

## Tech Stack

| Layer | Choice | Why |
|---|---|---|
| Framework | **SvelteKit 5** | Compiled reactivity, tiny bundle, no virtual DOM. The app shell is ~17KB gzipped. |
| Styling | **Tailwind CSS v4** | Utility-first, zero runtime. Pairs with the minimal UI design. |
| Icons | **Lucide Svelte** | Single icon used (paperclip for file upload). Tree-shaken, no bloat. |
| HTML Rendering | **iframe + srcdoc** | The browser's own rendering engine handles all CSS, scripts, and fonts. |
| Canvas Capture | **html2canvas** | Rasterizes the rendered DOM into a canvas. ~53KB gzipped. |
| PDF Generation | **jsPDF** | Converts canvas slices into a paginated PDF. ~23KB gzipped. |
| Deployment | **SvelteKit static adapter** | Pre-rendered HTML shell. Pure CDN-served static files. No server functions. |

## Privacy

The conversion pipeline is: `HTML string → iframe (srcdoc) → browser rendering engine → html2canvas → Canvas → jsPDF → Blob → download`. Every API used is browser-native or client-side JavaScript. Nothing leaves the device during conversion.

**The one exception:** URL mode. When you paste a URL, the app fetches the page via a public CORS proxy (`allorigins`) to get around browser cross-origin restrictions. The proxy sees the URL but never sees the PDF. To bypass even this, paste the HTML source directly.

## Development

```sh
npm install
npm run dev
```

## Build

```sh
npm run build    # outputs to /build
npm run preview  # preview the production build locally
```

The `/build` directory is a fully static site — deploy it to Cloudflare Pages, Vercel, Netlify, or any CDN.

## Sponsored by Fexr

**[Fexr](https://getfexr.com)** — Algorithmic infrastructure for community-driven market intelligence.
